

## 20201122讲课内容

#### 会议时间

> Mally 邀请您参加腾讯会议
> 会议主题：芯科第4次培训会
> 会议时间：2020/11/22 08:30-11:00
>
> 点击链接入会，或添加至会议列表：
> https://meeting.tencent.com/s/jeVNMWMhAjHl
>
> 会议 ID：900 770 811
>
> 手机一键拨号入会
> +8675536550000,,900770811# (中国大陆)
> +85230018898,,,2,900770811# (中国香港)
>
> 根据您的位置拨号
> +8675536550000 (中国大陆)
> +85230018898 (中国香港)







#### 点灯

**讲课**

1. 打开原理图，知道 给P1^0 口送0，灯就会亮

   

   ![mark](http://mally.oss-cn-qingdao.aliyuncs.com/PicGo上传的图片/20201120/200523152.png)

```c
#include<reg52.h>
sbit P10=P1^0;
void main()
{
	P1=0xff;  //一般要先全灭
	P10=0;	//LED0点亮
}
```

2. 让led3 不断闪灭

   ```c
   #include<reg52.h>
   sbit LED3=P1^2;
   void delay(int a)
   {
   	for(;a>=0;--a);
   }
   void main()
   {
   	P2=1;
   	while(1)
   	{
   		LED3=0;  //让灯亮
   		delay(10000);
   		LED3=1;  //让灯灭
   		delay(10000);
   	}
   	return;
   }
   ```

   



#### 流水灯



```c
#include<reg52.h>
void delay(int a)
{
	while(--a);
}
/*
高电平（1）灭，低电平（0）亮
1111 1110  0xfe  只有第1个灯亮
1111 1101 0xfd	 只有第2个灯亮
1111 1011 0xfb	 只有第3个灯亮
1111 0111 0xf7	 只有第4个灯亮
1110 1111 0xef	 只有第5个灯亮
1101 1111 0xdf	 只有第6个灯亮
1011 1111 0xbf	 只有第7个灯亮
0111 1111 0x7f	 只有第8个灯亮
*/
/*效果 */
void main()
{
	int i;
	int status[8]={0xfe,0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f}; 
	while(1)
	{
		for(i=0;i<8;++i)
		{
			P1=status[i];  //改变P1口的状态，也就改变了每个灯亮灭的情况
			delay(100000);	//延时
		}
	}
}
```



#### 按键开关灯

```c
#include <reg52.h>
sbit key1=P3^5;
sbit LED1=P1^0;
void delay(int z)
{
	while(z--);
}
void main()
{
	while(1)
	{
		if(key1==0)  //按键被按下了
		{
			delay(1000);    //消除抖动
			if (key1==0)   //如果这时按键还是为0，那么按键就是被按下了
			{
                if(LED1==0)LED1=1;else LED1=0;  //也可以写成LED1=~LED1
				delay(100);  
				while(!key1);//消除长按和短按的区别  
            }
       }
	}
	return;
}
```





**课堂测试**

1. 按一下按键切换灯的亮灭。

2. 每按一次按键，流水灯就动一下。

按键按下时，点亮第3个灯。



#### 按键实现流水灯

```c
#include<reg52.h> 

void delay(int a)
{
	while(--a);
}
sbit S1=P3^5;
int status[]={0xfe,0xfd,0xfb,0xf7,0xef,0xdf,0xbf,0x7f};
int th=0;
void light()
{
	  th=th+1;
	 if(th==8)th=0;
		P1=status[th];
}
void main()
{	
	 while(1)
	 {
		 if(S1==0)
		 {
			 delay(1000);
			 //按键效果，切换led灯的状态
			 if(S1==0)light();
			 while(S1==0); //试一试注释这一句的效果
		 }
	 }
	return;
}
```











## 课程安排

##### 上课方式

1. 使用腾讯会议录制屏幕，一方面让人在下面看的更清楚

2. 上课提问的方式

   方式是我演示一遍，然后叫人上来做一遍。

   


##### 上课目标

要全体的基础，不管快的人

本节课，我希望在做同学**都**能掌握的

1. 能点亮板子上的led1，清除烧录程序的流程
2. 读懂代码，会改代码实现led灯的不同效果
3. 读懂关于按键的代码



如果有同学基础比较好，可以在等其它同学的时间里思考和做以下几件事情

1. 思考实现流水灯有哪几种方式，并实现
2. 用按键实现流水灯
3. 用



这节课我的任务，和你们的任务

##### 上课流程计划

1. 新建工程  8：30-8：45

    演示一遍，5min

    再让人上来做一遍 5min

2. 点灯

   演示一遍点亮LED3 （写代码，烧程序）10min

   找人做一遍让  闪烁led3    15min

   

3. 流水灯

   我讲一遍代码，现场带敲一遍。 20min

   如果没有学过数组，就只用循环。教他们使用电脑自带的计算器看二进制。



4. 按键

   演示一遍按键实现改变led1的亮闪情况

5. 使用按键实现流水灯效果











