## 实验五 扫描显示驱动电路

#### 一、实验目的

1、了解实验系统中8位八段数码管显示模块的工作原理；

2、掌握计数器和地址发生器的VHDL描述方法；

3、掌握LED数码管7段译码器的VHDL描述方法；

4、掌握编码器的VHDL描述方法；

5、设计标准扫描驱动电路模块，以备后面实验用。

#### 二、实验仪器

PC机一台　QuartusII　软件  EDA实验箱

#### 三、实验内容

图6.1所示的是8位数码扫描显示电路，其中每个数码管的8个段：h、g、f、e、d、c、b、a（h是小数点）都分别连在一起，8个数码管分别由8个选通信号k1、k2、…k8来选择。被选通的数码管显示数据，其余关闭。如在某一时刻，k3为高电平，其余选通信号为低电平，这时仅k3对应的数码管显示来自段信号端的数据，而其它7个数码管呈现关闭状态。根据这种电路状况，如果希望在8个数码管显示希望的数据，就必须使得8个选通信号k1、k2、…k8分别被单独选通，并在此同时，在段信号输入口加上希望在该对应数码管上显示的数据，于是随着选通信号的扫变，就能实现扫描显示的目的。其VHDL示例程序如程序10.1所示。

![图6.1 8位数码扫描显示电路图](http://mally.oss-cn-qingdao.aliyuncs.com/PicGo上传的图片/20200519/204713322.png) 

​											图6.1 8位数码扫描显示电路图

1、实验内容1：理解程序中各语句的含义，以及该例的整体功能。对该例进行编辑、编译、综合、适配、仿真，给出仿真波形。

2、自行设计纪录方式，完成实验报告

【例5.1】

```vhdl
LIBRARY IEEE;
USE IEEE.STD_LOGIC_1164.ALL;
USE IEEE.STD_LOGIC_UNSIGNED.ALL;
ENTITY SCAN_LED IS                                    
    PORT (   CLK  : IN STD_LOGIC; 
              SG   : OUT STD_LOGIC_VECTOR(6 DOWNTO 0);   --段控制信号输出
              BT   : OUT STD_LOGIC_VECTOR(7 DOWNTO 0) );  --位控制信号输出
END;
ARCHITECTURE one OF SCAN_LED IS
    SIGNAL CNT8  : STD_LOGIC_VECTOR(2 DOWNTO 0); 
    SIGNAL    A  : INTEGER RANGE 0 TO 15;
BEGIN
P1:PROCESS( CNT8 )                                       --编码器
       BEGIN
         CASE  CNT8  IS
          WHEN "000" =>  BT <= "00000001" ; A <= 1 ;
          WHEN "001" =>  BT <= "00000010" ; A <= 3 ; 
          WHEN "010" =>  BT <= "00000100" ; A <= 5 ;
          WHEN "011" =>  BT <= "00001000" ; A <= 7 ;
          WHEN "100" =>  BT <= "00010000" ; A <= 9 ;
          WHEN "101" =>  BT <= "00100000" ; A <= 11 ;
          WHEN "110" =>  BT <= "01000000" ; A <= 13 ;
          WHEN "111" =>  BT <= "10000000" ; A <= 15 ;
          WHEN OTHERS =>  NULL ;
        END CASE ;
     END PROCESS P1;
P2:PROCESS(CLK)                                              --计数器
       BEGIN
          IF CLK'EVENT AND CLK = '1' THEN CNT8 <= CNT8 + 1;   
          END IF;
	   END PROCESS P2 ;   
P3:PROCESS( A )                                                 –-译码电路
       BEGIN
         CASE  A  IS
            WHEN 0  => SG <= "0111111";  WHEN 1  => SG <= "0000110"; 
        WHEN 2  => SG <= "1011011";  WHEN 3  => SG <= "1001111"; 
        WHEN 4  => SG <= "1100110";  WHEN 5  => SG <= "1101101"; 
        WHEN 6  => SG <= "1111101";  WHEN 7  => SG <= "0000111";
        WHEN 8  => SG <= "1111111";  WHEN 9  => SG <= "1101111"; 
        WHEN 10 => SG <= "1110111";  WHEN 11 => SG <= "1111100";
        WHEN 12 => SG <= "0111001";  WHEN 13 => SG <= "1011110"; 
        WHEN 14 => SG <= "1111001";  WHEN 15 => SG <= "1110001";
        WHEN OTHERS =>  NULL ;
      END CASE ;
       END PROCESS P3;    
END;
```



例6.1是扫描显示的示例程序，其中clk是扫描时钟；SG为7段控制信号，由高位至低位分别接g、f、e、d、c、b、a 7个段；BT是位选控制信号，接图5-20中的8个选通信号：k1、k2、…k8 。程序中CNT8是一个3位计数器，作扫描计数信号，由进程P2生成；进程P3是7段译码查表输出程序，与例5-18相同；进程P1是对8个数码管选通的扫描程序，例如当CNT8等于"001" 时，K2对应的数码管被选通，同时，A被赋值3，再由进程P3译码输出"1001111"，显示在数码管上即为“3”；当CNT8扫变时，将能在8个数码管上显示数据：13579BDF 。

#### 四、实验研究与思考

1、字形编码的种类，即一个8段数码管可产生多少种字符，产生所有字符需多少根译码信号线？

2、字符显示亮度和扫描频率的关系，且让人感觉不出光烁现象的最低扫描频率是多少？

3、扫描显示和静态显示有什么差别？使用扫描显示有什么好处？ 



 

#### 五.仿真图

![mark](http://mally.oss-cn-qingdao.aliyuncs.com/PicGo上传的图片/20200519/210620517.png)